<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Google</title>
    <link rel="icon" href="https://www.google.com/favicon.ico">
    <style>
        /* CSS stays the same as your reference image */
        :root { --bg: #fff; --txt: #202124; --brd: #dfe1e5; --ftr: #f2f2f2; }
        @media (prefers-color-scheme: dark) { :root { --bg: #202124; --txt: #e8eaed; --brd: #5f6368; --ftr: #171717; } }
        body { font-family: arial, sans-serif; margin: 0; background: var(--bg); color: var(--txt); height: 100vh; display: flex; flex-direction: column; }
        .header { display: flex; justify-content: flex-end; padding: 15px 20px; font-size: 13px; }
        .header a { text-decoration: none; color: var(--txt); margin-left: 15px; }
        .main { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; margin-top: -100px; }
        .logo { width: 272px; margin-bottom: 30px; }
        .search-container { width: 100%; max-width: 584px; position: relative; }
        .search-bar { width: 100%; height: 44px; border: 1px solid var(--brd); border-radius: 24px; background: var(--bg); color: var(--txt); padding: 0 45px; font-size: 16px; outline: none; box-sizing: border-box; }
        .btns { margin-top: 30px; }
        .btn { background: var(--ftr); border: 1px solid var(--ftr); color: var(--txt); padding: 0 16px; line-height: 36px; min-width: 54px; border-radius: 4px; font-size: 14px; margin: 5px; cursor: pointer; display: inline-block; }
        #arcade-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; background: #0b0e14; z-index: 9999; }
        .footer { background: var(--ftr); padding: 15px 30px; font-size: 14px; color: #70757a; position: absolute; bottom: 0; width: 100%; box-sizing: border-box; }
    </style>
</head>
<body>
    <div class="header"><a href="#">Gmail</a><a href="#">Images</a></div>
    <div class="main">
        <img class="logo" src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png">
        <div class="search-container">
            <input type="text" id="search" class="search-bar" autocomplete="off">
        </div>
        <div class="btns"><div class="btn" onclick="runSearch()">Google Search</div><div class="btn">I'm Feeling Lucky</div></div>
    </div>
    <div class="footer">United States</div>

    <div id="arcade-overlay"><iframe id="arcade-frame" src="src/dashboard.html" style="width:100%;height:100%;border:none;"></iframe></div>

    <script>
        const searchInput = document.getElementById('search');
        const overlay = document.getElementById('arcade-overlay');

        function runSearch() {
            const query = searchInput.value.toLowerCase().trim();
            
            if (query === "play") {
                // MAC PRANK
                if (navigator.platform.toUpperCase().indexOf('MAC') !== -1) {
                    window.location.href = "https://www.youtube.com/watch?v=dQw4w9WgXcQ";
                    return;
                }
                overlay.style.display = "block";
                document.title = "Google Docs";
            } else if (query !== "") {
                window.location.href = "https://google.com/search?q=" + encodeURIComponent(query);
            }
        }

        searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') runSearch(); });

        // ESCAPE TO LOCK
        window.addEventListener('keydown', (e) => {
            if (e.key === "Escape") {
                overlay.style.display = "none";
                document.title = "Google";
                searchInput.value = "";
            }
        });

        // GHOST LAUNCHER (The Fix for the Refresh Issue)
        window.addEventListener("message", (e) => {
            if (e.data.type === "OPEN_GAME") {
                const url = e.data.url;
                const win = window.open('about:blank', '_blank');
                if (!win) return alert("Pop-ups blocked!");

                const html = `
                    <html>
                    <head>
                        <title>Google Docs</title>
                        <link rel="icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon7.ico">
                        <style>body,html,iframe{margin:0;padding:0;height:100%;width:100%;overflow:hidden;border:none;}</style>
                    </head>
                    <body><iframe src="${url}"></iframe></body>
                    </html>
                `;
                win.document.open();
                win.document.write(html);
                win.document.close();
            }
        });
    </script>
</body>
</html>
